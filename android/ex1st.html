  <!DOCTYPE html>
  <html lang="ja"> 
      <head>
          <title>ITX1:Aoyama Gakuin University</title>
          <link rel="stylesheet" type="text/css" href="assets/css/itx1.css">
          <link href="assets/plugins/bootstrap/css/bootstrap.min.css" rel="stylesheet">
          <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.15.10/styles/vs.min.css">
          <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.15.10/highlight.min.js"></script>
          <link href="assets/plugins/highlight/styles/default.css" rel="stylesheet">
          <script href="assets/plugins/highlight/highlight.pack.js"></script>
          <script>hljs.initHighlightingOnLoad();</script>

      </head>
      <body>
      <div class="container">
        <div class="title">
          <h1>第１回：Android Studioアプリケーション開発</h1>
          <p style="text-align: right;">
            最終更新日：2024年3月11日
          </p>
        </div>
        <div class="practice practice-checkpoint">
              <h3>今回の実験において実行確認・提出するもの</h3>
              <p><strong>Task 1~5を実施しながら、各演習課題を実施・確認・提出して下さい。実行確認は、TA・教員からのチェックを受けて下さい。</strong></p>
              <p><strong>
          【チェック合格条件】</strong>各スクリーンショットと内容が一致すること（色は問わない）</p>
<ul>
      <li>Hello Worldアプリ実行（Fig.15）</li>
                  <li><a href="#演習課題1_1">演習問題1_1</a>の実行確認（Fig.1_1）＆　スクリーンショットの提出（CANVAS）</li>
                  <li><a href="#演習課題1_2">演習問題1_2</a>の回答入力（CANVAS）</li>
                  <li><a href="#演習課題1_3">演習問題1_3</a>の実行確認（Fig.1_3_1 &amp; Fig.1_3_2）&amp;　スクリーンショットの提出（CANVAS）</li>
                  <li><a href="#演習課題1_4">演習問題1_4</a>（LifeCycleActivity）の実行確認（Fig.1_4）＆　スクリーンショットの提出（CANVAS）</li>
              </ul>
          </div>
        <div class="contents">
          <h3>イントロダクション</h3>
          <p>今回の目標はAndroid Studioを用いた開発環境とその補助機能になれることです。本資料を注意深く読めば、十分実施できる内容です。Android Studioの使い方に関するより詳細な説明は<a href="https://developer.android.com/studio/intro?hl=ja"><strong>Android Developersサイトを参照</strong></a>することをお勧めします（それでも分からない場合はネット・○○GPTで検索してみましょう）。
          </p>
        </div>

        <div class="contents">
            <h3>Task 1: 使用端末（Tablet or Smartphone or Emulator）の設定</h3>
          <p>Task 1では、使用端末（Tablet or Smartphone or Emulator）の設定をします。</p>
          <h4>実機の場合（Tablet or Smartphone）</h2>
            <ul>
                <li>設定 -&gt; 端末情報 -&gt; <strong>ビルド番号を7回タップ</strong>（気にせずタップしまくる） -&gt; PIN入れてデベロッパーになります。</li>
                <li>設定 -&gt; システム -&gt; 詳細設定 -&gt; 開発者向けオプション -&gt; <strong>USBデバッグをオン</strong>（許可）-&gt; "USBデバッグが接続されました"と表示されるのを確認してください。</li>
                <li>設定 -&gt; セキュリティ -&gt; <strong>提供元不明のアプリをオン</strong>（許可）</li>
            </ul>
          <h4>Emulatorの場合</h2>
          <ol>
            <li>Android Studio起動後、Optionメニューから「Virtual Device Manager」をクリックする（Fig.１)<br>
              <figure class="figure">
                <img width="600" src="assets/images/ex1st/start_VDManager.png" class="figure-img img-fluid rounded" alt="fig1">
                <figcaption class="figure-caption text-center">Fig.1 Android Studioの起動画面とOptionメニュー</figcaption>
              </figure>                    
            </li>
            <li>Device Managerの画面から「＋」アイコンをクリックして、新しいVirtual Deviceの作成を開始する（Fig.2）。<br>
              <figure class="figure">
                <img width="500" src="assets/images/ex1st/Virtual_Device_SetUp (1).png" class="figure-img img-fluid rounded" alt="fig2">
                <figcaption class="figure-caption text-center">Fig.2 Device Managerの画面</figcaption>
              </figure>
            </li>
            <li>Virtual Device Configurationでは、新しく作成する仮想デバイスの設定を行う。まずは使いたいハードウェアを選ぶ。「Tablet＞Pixel」を選択して、「NEXT/次」に進む。（Fig.3）<br>
              <figure class="figure">
                <img width="600" src="assets/images/ex1st/Virtual_Device_SetUp (2).png" class="figure-img img-fluid rounded" alt="fig3">
                <figcaption class="figure-caption text-center">Fig.3 仮想デバイスの設定画面（ハードウェアの選択）</figcaption>
              </figure>
            </li>
            <li>次に、その仮想デバイス上で動作するAndroid OSのバージョンを決める。そのため、使いたいOSのバージョンの“イメージ”をAndroid Studioにインストールする必要がある。各バージョン名の横にあるダウンロードアイコンをクリックすれば、そのバージョンのインストールができる。今回は、現時点での最新ＯＳである「VanillaCream」をダウンロード・インストールする。（Fig.4）<br>
              <figure class="figure">
                <img width="600" src="assets/images/ex1st/Virtual_Device_SetUp (3).png" class="figure-img img-fluid rounded" alt="fig4left">
                <img width="500" src="assets/images/ex1st/Virtual_Device_SetUp (4).png" class="figure-img img-fluid rounded" alt="fig4">
                <figcaption class="figure-caption text-center">Fig.4 開発したいAndroid OSのイメージを選定する画面（左）と新規イメージインストール中の画面（右）</figcaption>
              </figure>
            </li>
            <li>OSイメージのダウンロードが終わると、仮想デバイスの詳細設定画面が表示される（Fig.5）。「AVD Name」の入力欄に「Pixel Tablet LOPEZ」のように入力する。「LOPEZ」の部分はご<strong>自分の苗字をAlphabetで入力</strong>し（同姓の学生がいる場合、名も苗字の後に追記すること）し、「Finish」をクリックする。<br>
              <figure class="figure">
                <img width="600" src="assets/images/ex1st/Virtual_Device_SetUp (5).png" class="figure-img img-fluid rounded" alt="fig5">
                <figcaption class="figure-caption text-center">Fig.5 仮想デバイスの詳細設定画面</figcaption>
              </figure>
            </li>
            <li>仮想デバイス一覧に作成した仮想デバイスが表示されていることを確認し、「再生▶」ボタンをクリックする（Fig.6）。<br>
              <figure class="figure">
                <img width="600" src="assets/images/ex1st/Virtual_Device_SetUp (6).png" class="figure-img img-fluid rounded" alt="fig6">
                <figcaption class="figure-caption text-center">Fig.6　仮想デバイス一覧の画面</figcaption>
              </figure>
            </li>
            <li>正しく設定できていれば、Fig.7のように、仮想Pixel Tablet が表示される。<br>
              <figure class="figure">
                <img width="600" src="assets/images/ex1st/Virtual_Device_SetUp (7).png" class="figure-img img-fluid rounded" alt="fig2.png">
                <figcaption class="figure-caption text-center">Fig.7 起動中の仮想PIXEL TABLET</figcaption>
              </figure>
            </li>
          </ol>
        </div>

        <div class="contents">
            <h3>Task 2: プロジェクト作成とアプリの実行</h3>
            <p>Task 2では、最初のAndroidアプリ「Hello World」を作成し、アンドロイドデバイス（実機）もしくはエミュレータ上で実行します。</p>
            <ol>
              <li>Android Studioがまだ開かれていない場合は、Android Studioを開きます。</li>
                <li>「Welcome to Android Studio」ウィンドウ内の、"Projects"タブでは、これまで作成したプロジェクトのリストが表示されます。上にある"<strong>New Project</strong>"ボタンをクリックします。
                    <br />
                    <figure class="figure">
                        <img width="800" src="assets/images/ex1st/newproject (1).png" class="figure-img img-fluid rounded" alt="fig5.png">
                        <figcaption class="figure-caption text-center">Fig.8 Android Studioの起動画面 </figcaption>
                    </figure>
                </li>
                <li>「New Project」ウィンドウ内、"Phone and Tablet" タブにおいて、様々なプロジェクトのテンプレートが表示されています。ここで必ず "<strong>Empty Views Activity</strong>"（必ず）を選択し、「<strong>Next</strong>」をクリックします。Activityとは、"Androidアプリの画面"に相当します。ボタンやリストが配置された画面、Webページが表示されている画面、3Dグラフィックスが表示されている画面を作成するためにActivityはAndroidアプリには欠かせない要素です。
                    <br/>
                    <figure class="figure">
                        <img width="800" src="assets/images/ex1st/newproject (2).png" class="figure-img img-fluid rounded" alt="fig3.png">
                        <figcaption class="figure-caption text-center">Fig.9 「Create Android Project」ウィンドウ内の"Select a Project Template"画面例</figcaption>
                    </figure>
                </li>
                <li>「New Project」ウィンドウの、"Name"、"Package name"、"Save location"、"Language"、"Minimum SDK"を設定します。本演習では、
                  <ul>
                    <li>"Name: <strong>Sample1_1</strong>"</li>
                    <li>"Package name" は、独自のドメインを作成します。package名は所属組織のドメイン名を逆から書くのが暗黙のルールです。本演習でのpackage名は「com.example」ではなく、<strong>「国.組織.学生番号」</strong>とします。e.g. 学生番号15823001の場合 <strong>jp.aoyama.a5823001.sample1_1</strong> になります。</li>
                    <li>"Save location："　は各自のPCの環境に合わせたもので良いが、<strong>半角アルファベットしか含まれていないパス</strong>にして下さい（漢字等含まれると後々困ることがある）。</li>
                    <li>"Language:　<strong>Java</strong>　に変更して下さい。"デフォルトのLanguage（プログラミング言語）は「Kotlin」になっていますので、必ず<strong>Java</strong>に変更すること。</li>
                    <li>"Minimum SDK: <strong>使用端末のAndroidのバージョン以下に合わせること</strong>"に変更して下さい（エミュレータの場合、Fig.10の例と同じで良い）。</li>
                  </ul>
                    <br />
                    <figure class="figure">
                        <img width="800" src="assets/images/ex1st/newproject (3).png" class="figure-img img-fluid rounded" alt="fig4.png">
                        <figcaption class="figure-caption text-center">Fig.10 「Create Android Project」ウィンドウ内の"Configure Your Project"画面例</figcaption>
                    </figure>
                </li>
                <li>Android StudioのEditorが表示され、デフォルトでは「<strong>activity_main.xml</strong>」と「<strong>MainActivity.java</strong>」の２つのファイルが開かれます。activity_main.xmlタブをクリックして、レイアウト・エディタを表示します。暫く、プロジェクト関連の様々なファイルの自動生成や、プロジェクトの・ビルドが自動で実施されるため、暫く待つこと。Fig.11の左下にある「金づち」アイコンをクリックすれば、ビルド中の詳細状況が表示されます。そのウィンドウで「BUILD SUCCESSFUL」が表示されたら、プロジェクト作成が（無事）終了したことになります。<br>
                    <figure class="figure">
                        <img width="800" src="assets/images/ex1st/newproject (6).png" class="figure-img img-fluid rounded" alt="fig6.png">
                        <figcaption class="figure-caption text-center">Fig.11 "Java File Code Editor"画面例</figcaption>
                    </figure>
                </li>
                <li>activity_main.xmlファイルのタブをクリックすると、以下のようなUIデザインの画面が表示されます。アプリUI画面の真ん中<strong>Hello World</strong>が表示されていることが確認できます。
                    <br />
                    <figure class="figure">
                        <img width="800" src="assets/images/ex1st/newproject (7).png" class="figure-img img-fluid rounded" alt="fig7.png">
                        <figcaption class="figure-caption text-center">Fig.12 "アプリUI Editor"画面例</figcaption>
                    </figure>
                </li>
              
                <li>UI Editorはデフォルトの端末の種類に合わせてUIのサイズなどを表示しています。そこで、本実験で用いるEmulatorに合わせたデザインに変更します。先ほどはPixel TabletのEmulatorを作成したので、Fig.12に示しているように、このUIもPixel Tabletの仕様に合わせて表示されるようにします（三日月のアイコンの隣に端末名が表示されていない場合「＞」を押せば現れる）。<br>
                    <figure class="figure">
                        <img width="800" src="assets/images/ex1st/newproject (8).png" class="figure-img img-fluid rounded" alt="fig6.png">
                        <figcaption class="figure-caption text-center">Fig.12 "UI design"の目的端末選定画面</figcaption>
                    </figure>
                </li>
              
                <li>作成したPixel Tablet仮想デバイスがまだ立ち上げられていない、Android Studioのウィンドウの右側にあるアイコンから、Fig.13に示すように、Device Managerを開き、Pixel Tableの仮想デバイスを起動します。<br>
                    <figure class="figure">
                        <img width="800" src="assets/images/ex1st/device_manager (1).png" class="figure-img img-fluid rounded" alt="device_manager (1)">
                        <figcaption class="figure-caption text-center">Fig.13 Device Managerウィンドウの表示と仮想デバイスの起動</figcaption>
                    </figure>
                </li>
              
                <li>作成したPixel Tablet仮想デバイスが立ち上がっている場合、Android Studioのウィンドウの右側にある「Running Devices」アイコンを押せば、Fig.14に示すように、仮想端末が表示されます。Android Studioウィンドウの上に並ばれているアイコンから、<strong>「実行ボタン<img src="assets/images/ex1st/run.png" alt="run.png"/>」</strong>を押して、アプリを起動します。<br>
                    <figure class="figure">
                        <img width="800" src="assets/images/ex1st/newproject (9).png" class="figure-img img-fluid rounded" alt="device_manager (1)">
                        <figcaption class="figure-caption text-center">Fig.14 起動中の仮想端末の表示と、アプリの実行方法</figcaption>
                    </figure>
                </li>
              
              
                <li>Fig.15に示すように、アプリが起動し、タブレット画面内で「Hello World!」が表示されたら、「Hello World」アプリの完成です（デフォールトでは文字サイズはこの例より小さい）。<br />
                    <figure class="figure">
                        <img width="800" src="assets/images/ex1st/app_start (1).png" class="figure-img img-fluid rounded" alt="fig8.png"/>
                        <figcaption class="figure-caption text-center">Fig.15 "Hello World"アプリの実行例</figcaption>
                    </figure>
                </li>
                <li>Fig.16に示すように、「猫」に似たアイコンをクリックすると、デバッグ画面（Logcat）を表示することが出来ます。デバッグした端末のスクリーンショットを保存したい場合は、View -&gt; Tool Windows -&gt; Logcat -&gt; "&gt;&gt;"を押下 -&gt; カメラアイコンを押下してください。
                    <br />
                    <figure class="figure">
                      <img width="500" src="assets/images/ex1st/app_start (2).png" class="figure-img img-fluid rounded" alt="fig8.png"/>
                        <figcaption class="figure-caption text-center">Fig.16 デバッグ情報を表示する方法</figcaption>
                    </figure>
                    <figure class="figure">
                      <img src="assets/images/ex1st/cameraUI.png" class="figure-img img-fluid rounded" alt="cameraUI.png"/>
                        <figcaption class="figure-caption text-center">Fig.17 Android Studioからスクリーンショットを撮影する方法</figcaption>
                    </figure>
                </li>
            </ol>
        </div>
        <div class="contents">
            <h3>機能説明: Android Studioのコード編集機能</h3>
            <p>ここでは、簡単な機能紹介しか行いません。使っていけば、慣れていきます。Android Studioの使い方に関するより詳細な説明は<a href="https://developer.android.com/studio/intro?hl=ja"><strong>Android Developersサイトを参照</strong></a>することをお勧めします（それでも分からない場合はネット・○○GPTで検索してみましょう）。<br>
          <strong>Androidアプリ開発では、プログラミング（実装したい機能・動作など）はJavaファイルとして実装、レイアウトのデザイン（実装したいGUI・画面構成など）はXMLファイルとして実装します。</strong></p>
            <figure class="figure">
                <img src="assets/images/ex1st/as-GUI.png" class="figure-img img-fluid rounded" alt="as-GUI.png"/>
                <figcaption class="figure-caption text-center">Fig.18 Android StudioのGUI例</figcaption>
            </figure>
            <figure class="figure">
                <img src="assets/images/ex1st/as-editor.png" class="figure-img img-fluid rounded" alt="as-editor.png"/>
                <figcaption class="figure-caption text-center">Fig.19 Android Studioのソースコードエディタ画面例</figcaption>
            </figure>
            <p><code>setContentView(R.layout.activity_main);</code>をコメントアウトして、アプリを起動するとなにが起きるかを確かめてみましょう。</p>
            <figure class="figure">
                <img src="assets/images/ex1st/as-codeassist.png" class="figure-img img-fluid rounded" alt="codeassist.png"/>
                <figcaption class="figure-caption text-center">Fig.20 コードアシストの実行例</figcaption>
            </figure>
            <p><strong>「CTRL」＋「SPACE」キー</strong>を押下するとコードアシストのpop-upが起動します。<br>
                エディタ左側のNavigation windowから<code>manifests</code>, <code>layout</code>, <code>menu</code>, <code>values</code>の各項目を展開（►）すると、アプリの設定・内容・属性の定義などに用いる複数のXML形式のファイルを確認することができます。
            </p>
            <h4>AndroidManifest.xml</h4>
            <p>Manifestがアプリケーションに関する必要不可欠な情報を表現し、それをAndroidシステムに伝え、アプリケーションのコードが実行される前に、この情報をシステムが持っていなければなりません。Manifestの主な役割は以下の通りです。</p>
            <ul>
                <li>アプリケーションのJava<strong>パッケージ名</strong>を指定する</li>
                <li>アプリケーションは<strong>アクティビティ</strong>・<strong>サービス</strong>・<strong>ブロードキャストレシーバ</strong>・<strong>コンテンツプロバイダ</strong>で構成される。そのアプリケーションのコンポーネントを記述する。それぞれコンポーネントを実装したクラスの名前およびその機能 (例えば、 Intent メッセージをハンドリングできるコンポーネントの選択) を公開する。 </li>
                <li><strong>ホスト（起動時呼び出すファイル）</strong>となるアプリケーションのコンポーネントを決定する。</li>
                <li>保護されたAPI部品（INTERNET、位置情報等々）にアクセスするためや、他のアプリケーションと相互作用するために、アプリケーションに付与すべき<strong>許可（PERMISSION）</strong>を宣言する。</li>
                <li>このアプリケーションのコンポーネントと相互作用するために、外部の他のアプリに付与されるべき許可を宣言する（intent-filter機能）。</li>
                <li>アプリケーションがリンクする必要があるライブラリをリストする。</li>
            </ul>
            <h4>resフォルダ</h4>
            <p>resフォルダはアプリケーションリソース（<strong>resources</strong>）で構成されています。Resourcesには、画像（<strong>drawable</strong>）・画面設計（<strong>layout</strong>）・メニュー（<strong>menu</strong>）・値（<strong>values</strong>）が含まれています。</p>
            <p>valueは寸法（<code>dimens.xml</code>）・文字列（<code>strings.xml</code>）・スタイル（<code>styles.xml</code>）の３つがあります。<br>
                アプリケーション全体で繰り返して利用する情報をXMLで定義します。例えば、デフォルトのタイトル”Sample1_1”の文字列は、resフォルダ内の<code>strings.xml</code>で定義されています。同様に、デフォルトの“Hello World!”の文字列は、resフォルダ内の<code>strings.xml</code>で定義されています。<br>
                文字列の場合には、専用エディタも提供されています。</p>
        </div>
        <div class="practice practice-primary">
          <a name="演習課題1_1"></a>
            <h3>演習課題1_1: 「Hello IT Practice1」アプリの作成</h3>
            <p>「Hello IT Practice1」アプリを実装し、Landscapeモード（横向き）にした時の結果のスクリーンショットを取りましょう。</p>
            <ul>
                <li>Task3で実装した"Hello World"から"<strong>Hello IT Practice 1</strong>"が画面左上に表示されるように変更する（スクリーンショットは"2"になっていますが、"1"にして下さい）。</li>
                <li>画面右下に"<strong>&copy;自分のイニシャル 学籍番号</strong>" e.g. &copy;AY 24703 が常に表示されるように変更する。</li>
            </ul>
            <figure class="figure">
                <img src="assets/images/ex1st/practice1_1.png" class="figure-img img-fluid rounded" alt="practice1_1.png"/>
              <figcaption class="figure-caption text-center">Fig.1_1 演習問題1_1の実行結果のスクリーンショット例</figcaption>
            </figure>
        </div>
        <div class="contents">
            <h3>機能説明: Android Studioのデザイン編集機能</h3>
            <p><code>activity_main.xml</code>タブをクリック、もしくは<code>resources</code>ディレクトリ直下の<code>layout</code>ディレクトリ内にある<code>activity_main.xml</code>を選択してGUI（グラフィカル・ユーザ・インタフェース）設計ツールを開きましょう。</p>
            <figure class="figure">
                <img src="assets/images/ex1st/as-designEditor.png" class="figure-img img-fluid rounded" alt="as-designEditor.png"/>
                <figcaption class="figure-caption text-center">Fig.21 デザインエディタの画面例</figcaption>
            </figure>
            <figure class="figure">
                <img src="assets/images/ex1st/as-designEditor2.png" class="figure-img img-fluid rounded" alt="as-designEditor2.png"/>
                <figcaption class="figure-caption text-center">Fig.22 デザインエディタから各コンポーネントの表示位置を青矢印を用いて指定する様子</figcaption>
            </figure>

        </div>

        <div class="practice">
            <h3>演習課題1_2: AndroidManifestの理解</h3>
            <p>AndroidManifest.xmlを読んで、以下の質問に回答しましょう。</p>
            <ul>
                <li>今回のアプリケーションの Java パッケージ名は？　　<em>（○○.javaファイルの１行目を参照）</em></li>
                <li>一般的に、アプリケーションを構成するコンポーネントの種類をすべてリストアップせよ？</li>
                <li>今回、ホストとなるアプリケーションのコンポーネント名は？</li>
                <li>今回、許可（PERMISSION）の宣言がありますか？</li>
                <li>今回、他のアプリに付与されるべき許可の宣言（intent-filter）がありますか?</li>
            </ul>
        </div>
        <div class="contents">
            <h3>Task 4: アプリにログステートメントを追加する（Logcatの使い方）</h3>
            <p>Androidではログを取得する機能として、<strong>Logcat</strong>が用意されています。下記のように、Logcatのタグ（TAG）の部分に<strong>現在実行中のクラス名を書くのが定番</strong>となっています。</p>
            <pre><code class="java">private static final String TAG = "SampleActivity1_1";</code></pre>
            <pre><code class="java">
    public class SampleActivity1_1{
        /** Logcatのタグに含める文字列. */
        private static final String TAG = "SampleActivity1_1";
        @Override
        protected void onCreate(Bundle savedInstanceState) {
            super.onCreate(savedInstanceState);
            Log.v(TAG,"メッセージ");
            Log.d(TAG,"メッセージ");
            Log.i(TAG,"メッセージ");
            Log.w(TAG,"メッセージ");
            Log.e(TAG,"メッセージ");
        }
    }
                </code>
            </pre>
            <figure class="figure">
                <img src="assets/images/ex1st/logcat_message.png" class="figure-img img-fluid rounded" alt="logcat_message.png"/>
                <figcaption class="figure-caption text-center">Fig.15 Task 4の内容に変更後の実行時のEditorとLogcatの画面例</figcaption>
            </figure>
            <p>上記メッセージは、<strong>Logcatビュー</strong>で簡単に確認することができます。<br>
                Logcatのビューが表示されていない場合は Android Studio [View]→[Tool Window]→[Android]で表示してください。<br>
                Logcatではタグでログを絞り込むことができるので、機械的に設定しておけば、着目したいクラスのログがすぐに絞り込めて便利です。ログを出力するのとしないのとでは、開発効率がかなり違うので、できるだけログを活用しましょう！</p>
            <p>ログを入れたい場所に、以下のいずれかの関数を各用途に合わせて使用しましょう。</p>
            <pre>
                <code class="java">
    /* 簡易メッセージ */
    Log.v(TAG,"メッセージ");
    /* デバッグメッセージ */
    Log.d(TAG,"メッセージ");
    /* 情報 */
    Log.i(TAG,"メッセージ");
    /* 警告 */
    Log.w(TAG,"メッセージ");
    /* エラー */
    Log.e(TAG,"メッセージ");
                </code>
            </pre>
        </div>
        <div class="practice">
            <h3>演習課題1_3: Logcatの理解</h3>
            <p>SampleActivity1_1プロジェクトのまま、上記の通りにコードを追加する。</p>
            <ul>
              <li>Fig.15のように実行結果を確認する。実行結果のスクリーンショットを撮ること。</li>
                <li>"メッセージ"の代わりに上記のようにぞれぞれの用途にあったメッセージを入力し、アプリを再実行した際Logcatのlog level機能を用いて、警告とエラーしかlogcat内に表示されないようにする（Fig.1_3_1を参照）。実行結果のスクリーンショットを撮ること。</li>
                <li>LogcatのFilter機能を用いて、アプリを再実行した際SampleActivity1_1で設定したTAGのログしか表示されないようにする（Fig.1_3_2を参照）。実行結果のスクリーンショットを撮ること。</li>
            </ul>
          <p><strong>Android Studio Dolphin 6以降のlog level および、Tagによるフィルタの設定方法は<a href="https://androidstudio.googleblog.com/2022/03/android-studio-dolphin-canary-6-now.html">User guide</a>を参照して下さい。</strong></p>
            <figure class="figure">
                <img src="assets/images/ex1st/SampleActivity1_2_log1.png" class="figure-img img-fluid rounded" alt="SampleActivity1_2_log1.png"/>
              <figcaption class="figure-caption text-center">Fig.1_3_1 警告とエラーログしかlogcatに表示されない時の画面例</figcaption>
            </figure>
            <figure class="figure">
                <img src="assets/images/ex1st/SampleActivity1_2_log.png" class="figure-img img-fluid rounded" alt="SampleActivity1_2_log.png"/>
                <figcaption class="figure-caption text-center">Fig.1_3_2 SampleActivity1_2で設定したTAGのログしかlogcatに表示されない時の画面例</figcaption>
            </figure>
        </div>
        <div class="contents">
            <h3>Task 5: Activityのライフサイクル（Lifecycle）</h3>
            <p>ユーザーがアプリの内外を移動してからアプリに戻ると、アプリ内のActivityインスタンスはライフサイクルのさまざまな状態の間を遷移します。Activityクラスには、システムがActivityを作成、停止、再開している、またはActivityが存在するプロセスを破棄しているなど、状態が変化したことをActivityが認識できるようにするコールバックが備えられています。</p>
            <p>ライフサイクル コールバック メソッド内で、ユーザーがActivityを離れてから戻った場合のActivityの動作を宣言できます。たとえば、ストリーミング動画プレーヤーを作成している場合は、ユーザーが別のアプリに切り替えたときに動画を一時停止し、ネットワーク接続を終了するようにできます。ユーザーが戻ってきた際に、ネットワークに再接続して、ユーザーが同じ場所から動画の再生を再開できるようにします。つまり、各コールバックにより、特定の状態変化に対して適した作業を実行できます。適切な作業を適切なタイミングで行い、移行を正しく処理することで、アプリの堅牢性とパフォーマンスが向上します。 たとえば、ライフサイクル コールバックを適切に実装することで、アプリで次の状況を回避できます。</p>
            <ul>
                <li>アプリの使用中にユーザーが電話を受信したり、別のアプリに切り替えたりするとクラッシュする。</li>
                <li>ユーザーが実際に使用していない場合に、貴重なシステム リソースが消費される。</li>
                <li>ユーザーがアプリを離れてから後で戻ると、ユーザーの進捗状況が失われる。</li>
                <li>画面が横向きと縦向きの表示を切り替えている間に、クラッシュする、またはユーザーの進捗状況が失われる。</li>
            </ul>
            <p>Activityのライフサイクルにおけるステージ間を移動するために、Activityクラスには <strong>onCreate()</strong>、<strong>onStart()</strong>、<strong>onResume()</strong>、<strong>onPause()</strong>、<strong>onStop()</strong>、<strong>onDestroy()</strong>の 6 つのコールバックのコアセットがあります。Activityが新しい状態になると、これらの各コールバックが呼び出されます。以下の図は、ライフサイクルを視覚的に示したものです。
                <br />
                <figure class="figure">
                    <img src="assets/images/ex1st/activity_lifecycle.png" class="figure-img img-fluid rounded" alt="activity_lifecycle.png"/>
                    <figcaption class="figure-caption text-center">Fig.16 ActivityのLifecycleに関する簡略図</figcaption>
                </figure>
            </p>
            <h4>
                <a class="external-link" href="https://developer.android.com/guide/components/activities/activity-lifecycle?hl=ja#oncreate">onCreate()</a>
            </h4>
            <p>onCreate()は、システムが最初にActivityを作成したときに呼び出されます。Activityが作成されると、Activityは作成済みの状態になります。 onCreate()メソッドでは、Activityのライフサイクルの全期間で1回のみ実行する必要がある基本的なアプリの起動ロジックを実行します。例えば、onCreate() の実装では、データをリストにバインドし、Activityを ViewModel に関連付け、一部のクラススコープ変数をインスタンス化します。このメソッドはパラメータsavedInstanceStateを受け取ります。これは、Activityの以前に保存された状態を含むBundleオブジェクトです。Activityがこれまで存在しなかった場合、Bundleオブジェクトの値はnullになります。</p>
            <h4>
                <a class="external-link" href="https://developer.android.com/guide/components/activities/activity-lifecycle?hl=ja#onstart">onStart()</a>
            </h4>
            <p>Activityが<strong>開始状態</strong>になると、システムはこのコールバックを呼び出します。アプリがActivityをフォアグラウンドに移動して操作可能な状態にする準備を行うと、onStart() の呼び出しによってActivityがユーザーに表示されます。 たとえば、このメソッドでは、UI を保持するコードをアプリが初期化します。</p>
            <h4>
                <a class="external-link" href="https://developer.android.com/guide/components/activities/activity-lifecycle?hl=ja#onresume">onResume()</a>
            </h4>
            <p>Activityが<strong>再開状態（実行状態）</strong>になるとフォアグラウンドに移動し、システムは onResume() コールバックを呼び出します。これは、アプリがユーザーと対話する状態です。フォーカスがアプリから他の対象に移動する状況が発生するまで、アプリはこの状態を保持します。このようなイベントには、電話の着信、別のActivityへのユーザーの移動、デバイス画面をオフにする操作などがあります。</p>
            <p>Activityが再開状態に移行すると、Activityのライフサイクルに関連付けられているライフサイクル対応コンポーネントは、すべて ON_RESUME イベントを受け取ります。この時点で、ライフサイクル コンポーネントは、コンポーネントが表示されフォアグラウンドにある状態で実行する必要がある機能（カメラ プレビューの開始など）を有効にできます。</p>
            <p>onResume()後の再開状態（実行状態）では、Activityがフォアグラウンドで実行され、ユーザはそこで操作を行うことができます。</p>
            <p>割り込みイベントが発生すると、Activityは一時停止状態になり、システムは onPause() コールバックを呼び出します。</p>
            <h4>
                <a class="external-link" href="https://developer.android.com/guide/components/activities/activity-lifecycle?hl=ja#onpause">onPause()</a>
            </h4>
            <p>ユーザーがActivityを離れることを最初に示すために、システムはこのメソッドを呼び出します（Activityが破棄されることを意味するとは限りません）。これは、Activityがフォアグラウンドにないことを示します（ユーザーがマルチウィンドウ モードの場合は、Activityが引き続き表示されます）。 Activityが<strong>一時停止状態</strong>であり、間もなく再開する予定である場合は、onPause() メソッドを使用して、続行しない（または適度に続行する）必要がある操作を一時停止または調整します。</p>
            <p>onPause後の一時停止状態では、Activityは別のActivityによって部分的に隠されています。フォアグラウンドにある別のActivityは半透明になっているか、全画面をカバーしていません。 一時停止したActivityはユーザの入力を受信せず、一切のコードを実行できません。</p>
            <h4>
                <a class="external-link" href="https://developer.android.com/guide/components/activities/activity-lifecycle?hl=ja#onstop">onStop()</a>
            </h4>
            <p>ユーザーに表示されなくなったActivityは、<strong>停止状態</strong>になり、システムは onStop() コールバックを呼び出します。これは、新たに開始されたActivityが画面全体を占有する場合などに発生します。Activityの実行が終了し、間もなく消滅する場合に、システムによって onStop() も呼び出されることがあります。</p>
            <p>Activityが停止状態に移行すると、Activityのライフサイクルに関連付けられているライフサイクル対応コンポーネントは、ON_STOP イベントを受け取ります。この時点で、ライフサイクル コンポーネントは、コンポーネントが画面に表示されていない間に実行する必要のない機能を停止できます。</p>
            <p>onStop後の停止状態では、Activityは完全に隠され、ユーザには表示されません。バックグラウンドに存在するとみなされます。 停止状態の間、Activity インスタンスとメンバ変数のようなそのすべての状態情報は保持されますが、Activity インスタンスは一切のコードを実行できません。</p>
            <h4>
                <a class="external-link" href="https://developer.android.com/guide/components/activities/activity-lifecycle?hl=ja#ondestroy">onDestroy()</a>
            </h4>
            <p>onDestroy() はActivityが破棄される前に呼び出されます。このコールバックは、次のいずれかの理由でシステムによって呼び出されます。</p>
            <ul>
                <li>Activityが終了する（ユーザーがActivityを完全に閉じるか、Activityに対して finish() が呼び出さたことによる）。</li>
                <li>構成の変更（デバイスの向きの変更やマルチウィンドウ モードなど）に伴いActivityが一時的に破棄される。</li>
            </ul>
        </div>
        <div class="practice">
            <h3>演習課題1_4: Activity（アプリ）のライフサイクルの理解</h3>
            <p>Sample1_1プロジェクトのまま、<strong>コードアシストを利用しながら</strong>、下記名称のメソッドを追加しましょう。</p>
            <ul>
                <li>onDestroy(), onStop(), onPause(), onResume(), onRestart(), onStart()</li>
                <li>上記<strong>各メソッド内、ログのデバッグメッセージを追加</strong>し、どんな操作をした時メッセージがlogcatに表示されるかを確認すること。</li>
            </ul>
            <figure class="figure">
                <img src="assets/images/ex1st/lifecycle_log.png" class="figure-img img-fluid rounded" alt="lifecycle_log.png"/>
              <figcaption class="figure-caption text-center">Fig.1_4 上記変更を加えた後プロジェクトを実行した時のLogcat画面例</figcaption>
            </figure>
        </div>
          <!--div class="contents">
              <h3>Option: Virtual Deviceの使い方</h3>
              <p>&nbsp;</p>
          </div-->
      </div>
      </body>
  </html>